/**
 * Page Transitions - 頁面過渡動畫
 * 創造流暢的頁面切換體驗
 * 包含玻璃重組、液體流動、玻璃波紋等效果
 */

/* ===== 頁面進入動畫設定 ===== */

/**
 * 頁面容器設定
 * 為頁面過渡動畫創造基礎環境
 */
.page-transition-container {
    position: relative;
    overflow: hidden;
}

/* ===== 玻璃重組進入（Glass Rebuild Enter）===== */

/**
 * 頁面載入時，元素從玻璃碎片重組為完整介面
 * 適合首次載入頁面或重要頁面的進入動畫
 */
.page-enter-glass-rebuild {
    animation: page-enter-glass-rebuild 800ms var(--ease-out-expo);
}

@keyframes page-enter-glass-rebuild {
    0% {
        opacity: 0;
        transform: scale(0.85) rotateX(20deg) translateY(40px);
        filter: blur(30px);
    }
    60% {
        opacity: 0.8;
        filter: blur(5px);
    }
    100% {
        opacity: 1;
        transform: scale(1) rotateX(0deg) translateY(0);
        filter: blur(0);
    }
}

/* 玻璃重組退出 */
.page-exit-glass-rebuild {
    animation: page-exit-glass-rebuild 600ms var(--ease-out-expo);
}

@keyframes page-exit-glass-rebuild {
    0% {
        opacity: 1;
        transform: scale(1) rotateX(0deg) translateY(0);
        filter: blur(0);
    }
    40% {
        opacity: 0.8;
        filter: blur(5px);
    }
    100% {
        opacity: 0;
        transform: scale(0.9) rotateX(-15deg) translateY(-30px);
        filter: blur(20px);
    }
}

/* ===== 液體流動過渡（Liquid Flow Transition）===== */

/**
 * 頁面像液體般流動切換
 * 適合頁面之間的平滑過渡
 */
.page-enter-liquid {
    animation: page-enter-liquid 600ms var(--ease-out-expo);
}

@keyframes page-enter-liquid {
    0% {
        opacity: 0;
        transform: translateX(120px) scale(0.92);
        filter: blur(25px);
    }
    60% {
        opacity: 0.9;
        filter: blur(3px);
    }
    100% {
        opacity: 1;
        transform: translateX(0) scale(1);
        filter: blur(0);
    }
}

.page-exit-liquid {
    animation: page-exit-liquid 500ms var(--ease-out-expo);
}

@keyframes page-exit-liquid {
    0% {
        opacity: 1;
        transform: translateX(0) scale(1);
        filter: blur(0);
    }
    40% {
        opacity: 0.9;
        filter: blur(3px);
    }
    100% {
        opacity: 0;
        transform: translateX(-120px) scale(0.92);
        filter: blur(25px);
    }
}

/* 液體流動變體 - 從上方 */
.page-enter-liquid-from-top {
    animation: page-enter-liquid-from-top 600ms var(--ease-out-expo);
}

@keyframes page-enter-liquid-from-top {
    0% {
        opacity: 0;
        transform: translateY(-100px) scale(0.95);
        filter: blur(20px);
    }
    100% {
        opacity: 1;
        transform: translateY(0) scale(1);
        filter: blur(0);
    }
}

/* 液體流動變體 - 從下方 */
.page-enter-liquid-from-bottom {
    animation: page-enter-liquid-from-bottom 600ms var(--ease-out-expo);
}

@keyframes page-enter-liquid-from-bottom {
    0% {
        opacity: 0;
        transform: translateY(100px) scale(0.95);
        filter: blur(20px);
    }
    100% {
        opacity: 1;
        transform: translateY(0) scale(1);
        filter: blur(0);
    }
}

/* ===== 玻璃波紋過渡（Glass Ripple Transition）===== */

/**
 * 從中心向外擴散的玻璃波紋效果
 * 適合模態框、對話框的出現
 */
.page-enter-glass-ripple {
    animation: page-enter-glass-ripple 700ms var(--ease-out-back);
}

@keyframes page-enter-glass-ripple {
    0% {
        opacity: 0;
        transform: scale(0.5);
        filter: blur(15px);
    }
    50% {
        opacity: 0.8;
        transform: scale(1.05);
        filter: blur(5px);
    }
    100% {
        opacity: 1;
        transform: scale(1);
        filter: blur(0);
    }
}

.page-exit-glass-ripple {
    animation: page-exit-glass-ripple 500ms var(--ease-in-out-circ);
}

@keyframes page-exit-glass-ripple {
    0% {
        opacity: 1;
        transform: scale(1);
        filter: blur(0);
    }
    50% {
        opacity: 0.5;
        transform: scale(1.05);
        filter: blur(5px);
    }
    100% {
        opacity: 0;
        transform: scale(0.8);
        filter: blur(15px);
    }
}

/* ===== 極光淡入過渡（Aurora Fade Transition）===== */

/**
 * 帶極光色彩的淡入淡出效果
 * 適合內容區域的切換
 */
.page-enter-aurora-fade {
    animation: page-enter-aurora-fade 800ms var(--ease-out-expo);
}

@keyframes page-enter-aurora-fade {
    0% {
        opacity: 0;
        transform: translateY(30px);
        filter: blur(10px) brightness(1.3) saturate(1.5);
    }
    60% {
        filter: blur(2px) brightness(1.1) saturate(1.2);
    }
    100% {
        opacity: 1;
        transform: translateY(0);
        filter: blur(0) brightness(1) saturate(1);
    }
}

.page-exit-aurora-fade {
    animation: page-exit-aurora-fade 500ms var(--ease-out-expo);
}

@keyframes page-exit-aurora-fade {
    0% {
        opacity: 1;
        transform: translateY(0);
        filter: blur(0) brightness(1) saturate(1);
    }
    40% {
        filter: blur(2px) brightness(1.1) saturate(1.2);
    }
    100% {
        opacity: 0;
        transform: translateY(-30px);
        filter: blur(10px) brightness(1.3) saturate(1.5);
    }
}

/* ===== 玻璃滑動過渡（Glass Slide Transition）===== */

/**
 * 玻璃材質的滑動過渡
 * 適合側邊欄、抽屜的進出
 */
.page-enter-glass-slide-left {
    animation: page-enter-glass-slide-left 600ms var(--ease-out-expo);
}

@keyframes page-enter-glass-slide-left {
    0% {
        opacity: 0;
        transform: translateX(-100%) scale(0.98);
        backdrop-filter: blur(0);
    }
    100% {
        opacity: 1;
        transform: translateX(0) scale(1);
        backdrop-filter: blur(var(--blur-md));
    }
}

.page-enter-glass-slide-right {
    animation: page-enter-glass-slide-right 600ms var(--ease-out-expo);
}

@keyframes page-enter-glass-slide-right {
    0% {
        opacity: 0;
        transform: translateX(100%) scale(0.98);
        backdrop-filter: blur(0);
    }
    100% {
        opacity: 1;
        transform: translateX(0) scale(1);
        backdrop-filter: blur(var(--blur-md));
    }
}

/* ===== 深度縮放過渡（Depth Zoom Transition）===== */

/**
 * 帶景深的縮放過渡
 * 創造 3D 空間感
 */
.page-enter-depth-zoom {
    animation: page-enter-depth-zoom 700ms var(--ease-out-expo);
}

@keyframes page-enter-depth-zoom {
    0% {
        opacity: 0;
        transform: scale(0.7) translateZ(-200px);
        filter: blur(20px);
    }
    100% {
        opacity: 1;
        transform: scale(1) translateZ(0);
        filter: blur(0);
    }
}

.page-exit-depth-zoom {
    animation: page-exit-depth-zoom 500ms var(--ease-out-expo);
}

@keyframes page-exit-depth-zoom {
    0% {
        opacity: 1;
        transform: scale(1) translateZ(0);
        filter: blur(0);
    }
    100% {
        opacity: 0;
        transform: scale(1.2) translateZ(200px);
        filter: blur(20px);
    }
}

/* ===== 玻璃溶解過渡（Glass Dissolve Transition）===== */

/**
 * 玻璃材質逐漸溶解的效果
 * 適合刪除、移除操作的反饋
 */
.page-exit-glass-dissolve {
    animation: page-exit-glass-dissolve 800ms var(--ease-in-out-circ);
}

@keyframes page-exit-glass-dissolve {
    0% {
        opacity: 1;
        transform: scale(1);
        filter: blur(0) brightness(1);
    }
    50% {
        opacity: 0.5;
        transform: scale(0.95);
        filter: blur(8px) brightness(1.2);
    }
    100% {
        opacity: 0;
        transform: scale(0.85);
        filter: blur(30px) brightness(1.5);
    }
}

/* ===== 組合動畫 - 頁面切換序列 ===== */

/**
 * 完整的頁面切換序列
 * 先退出舊頁面，再進入新頁面
 */
.page-transition-sequence-exit {
    animation: page-exit-liquid 400ms var(--ease-out-expo);
}

.page-transition-sequence-enter {
    animation: page-enter-liquid 600ms var(--ease-out-expo) 450ms backwards;
}

/* ===== 工具類別 - 延遲控制 ===== */

/* 短延遲 */
.page-transition-delay-short {
    animation-delay: 150ms;
}

/* 中延遲 */
.page-transition-delay-medium {
    animation-delay: 300ms;
}

/* 長延遲 */
.page-transition-delay-long {
    animation-delay: 500ms;
}

/* ===== 工具類別 - 速度控制 ===== */

/* 快速 */
.page-transition-fast {
    animation-duration: 400ms !important;
}

/* 正常（預設） */
.page-transition-normal {
    animation-duration: 600ms !important;
}

/* 慢速 */
.page-transition-slow {
    animation-duration: 900ms !important;
}

/* ===== 響應式調整 ===== */

/* 移動裝置簡化動畫 */
@media (max-width: 767px) {
    .page-enter-glass-rebuild,
    .page-enter-liquid,
    .page-enter-aurora-fade,
    .page-enter-depth-zoom {
        animation-duration: 400ms;
        filter: none !important; /* 移除模糊以提升性能 */
    }

    .page-exit-glass-rebuild,
    .page-exit-liquid,
    .page-exit-aurora-fade,
    .page-exit-depth-zoom {
        animation-duration: 300ms;
        filter: none !important;
    }

    /* 簡化 3D 變換 */
    @keyframes page-enter-glass-rebuild {
        0% {
            opacity: 0;
            transform: scale(0.9) translateY(20px);
        }
        100% {
            opacity: 1;
            transform: scale(1) translateY(0);
        }
    }

    @keyframes page-enter-depth-zoom {
        0% {
            opacity: 0;
            transform: scale(0.85);
        }
        100% {
            opacity: 1;
            transform: scale(1);
        }
    }
}

/* 減少動作偏好設定 */
@media (prefers-reduced-motion: reduce) {
    /* 將所有過渡動畫簡化為淡入淡出 */
    .page-enter-glass-rebuild,
    .page-enter-liquid,
    .page-enter-glass-ripple,
    .page-enter-aurora-fade,
    .page-enter-glass-slide-left,
    .page-enter-glass-slide-right,
    .page-enter-depth-zoom,
    .page-enter-liquid-from-top,
    .page-enter-liquid-from-bottom {
        animation: simple-fade-in 300ms ease !important;
    }

    .page-exit-glass-rebuild,
    .page-exit-liquid,
    .page-exit-glass-ripple,
    .page-exit-aurora-fade,
    .page-exit-depth-zoom,
    .page-exit-glass-dissolve {
        animation: simple-fade-out 200ms ease !important;
    }

    @keyframes simple-fade-in {
        from { opacity: 0; }
        to { opacity: 1; }
    }

    @keyframes simple-fade-out {
        from { opacity: 1; }
        to { opacity: 0; }
    }
}

/* ===== 效能優化提示 ===== */

/* 提示瀏覽器優化過渡動畫的屬性 */
.page-transition-container,
[class*="page-enter-"],
[class*="page-exit-"] {
    will-change: transform, opacity, filter;
}

/* 動畫完成後移除 will-change */
[class*="page-enter-"].animation-done,
[class*="page-exit-"].animation-done {
    will-change: auto;
}
